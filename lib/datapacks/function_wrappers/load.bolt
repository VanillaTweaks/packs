from functools import cache

from lib:base_locations import vt
from lib:datapacks import load_status

ctx.require("beet.contrib.lantern_load.base")


def load(base_location):
    # Adds to a resource location's load function, which is (indirectly) called by
    #  `#minecraft:load`.

    load_status.set(vt)
    load_status.set(base_location)

    load_function = base_location / "_load"

    append function_tag load:load {"values": [load_function]}

    return load_function


load = cache(load)
